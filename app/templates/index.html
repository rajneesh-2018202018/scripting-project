{%extends 'base.html' %}
{% block nav_left %}
  {%if logged_in %}
    <li><a href="/editor"> Create Blog</a></li>
  {%endif%}
{% endblock %}

{% block nav_right %}
    {%if logged_in %}
      <li><a href="/admin"><span class="glyphicon glyphicon-user"></span> {{username}}</a></li>
    {%else%}
    <li><a href="/register"><span class="glyphicon glyphicon-plus-sign"></span> Sign up</a></li>
      <li><a href="/login"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
    {%endif%}

    
{% endblock %}
{%block content%}
{%if logged_in%}
<div class="container">
  <div class="row content">
    <div class="col-sm-12">
      {% for post in blogs %}
        <hr>
        <h2>{{post.user_name}}</h2>
        <h5><span class="glyphicon glyphicon-time"></span>{{post.date}}</h5>
        <h4>{{post.title}}</h4>
        <p>{{post.content | safe }}</p>
        <br><br>
      {% endfor %}
    </div>
  </div>
</div>
{%else%}
  <div class="container">
  <div class="row content">
  {% for post in blogs %}
    <hr>
    <!-- <h2>{{post.title}}</h2>
    <h5><span class="glyphicon glyphicon-time"></span>{{post.date}}</h5>
    <p id='blog{{post.blog_id}}' style="overflow:hidden;max-height: 100px;display: block;">{{post.content | safe }}</p>
    <button class="btn btn-secondary"onClick="{if(this.textContent=='more'){document.getElementById('blog{{post.blog_id}}').style.maxHeight='none';this.textContent='less';}else{document.getElementById('blog{{post.blog_id}}').style.maxHeight='300px';this.textContent='more';}}" >more</button> -->
    <h3>{{ post.title }}</h3>
    <h4>{{ post.user_name }}</h4>
    <div id='blog{{post.blog_id}}' style="display:block;max-height:200px; overflow: hidden;">{{ post.content | safe }}</div>
<button onClick="{if(this.textContent=='more'){document.getElementById('blog{{post.blog_id}}').style.maxHeight='none';this.textContent='less';}else{document.getElementById('blog{{post.blog_id}}').style.maxHeight='200px';this.textContent='more';}}" >more</button>
<button id='comment' onclick="{var div =document.getElementById('comment{{post.blog_id}}');if(div.style.display=='none'){div.style.display='block';get_comment('{{post.blog_id}}')}else{div.style.display='none'}}">comment</button>
<div style="display:none;" id='comment{{post.blog_id}}'>
</div>
    <br><br>
  {% endfor %}
  </div>
  </div>
{%endif%}
{% endblock %}